WindowManager:
    MainScreen:
    MenuScreen:

<MainScreen>:
    name: 'main'
    FloatLayout:
        Image:
            id: background
            anim_delay: 0.00
            size: (800, 640)
            pos: (0, 0)
        Button:
            id: menu
            text: "Menu"
            font_size: 40
            size_hint: (0.2, 0.2)
            pos: (800 * 0.8, 640 * 0.8)
            background_color: (0.5, 0.5, 0.5, 0.25)
            on_release:
                root.stop()
                root.manager.transition.direction = 'left'
                root.manager.current = 'menu'
                root.manager.get_screen('menu').start()
        Label:
            id: fps
            text: "0"
            size_hint: (0.1, 0.1)
            pos: (0, 576)

        Button:
            id: capture
            text: "capture"
            font_size: 40
            size_hint: (0.4, 0.4)
            pos: (800*0.3, 640*0.3)
            background_color: (0, 0, 0, 0)
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height
            on_release:
                app.captureImage()

<MenuScreen>:
    name: 'menu'
    FloatLayout:
        Image:
            id: background
            anim_delay: 0.00
            pos: (0, 128)
            size_hint: (0.8, 0.8)

        Image:
            id: hist
            pos: (0, 128)
            size_hint: (0.8, 0.8)

        Button:
            id: menu
            text: "Return"
            font_size: 30
            size_hint: (0.2, 0.2)
            pos: (0, 0)
            background_color: (0.5, 0.5, 0.5, 0.25)
            halign: 'center'
            valign: 'middle'
            on_release:
                root.stop()
                root.manager.transition.direction = 'right'
                root.manager.current = 'main'
                root.manager.get_screen('main').start()

        ToggleButton:
            id: invert
            text: "Invert\nColors"
            font_size: 30
            size_hint: (0.2, 0.2)
            pos: (320, 0)
            background_color: (0.5, 0.5, 0.5, 0.25)
            halign: 'center'
            valign: 'middle'
            on_release:
                app.stream.invert()

        ToggleButton:
            id: wbactivate
            text: "White\nBalance"
            font_size: 30
            size_hint: (0.2, 0.2)
            pos: (640, 0)
            background_color: (0.5, 0.5, 0.5, 0.25)
            halign: 'center'
            valign: 'middle'
            on_release:
                app.stream.activateWB()

        Slider:
            id: exposureSlider
            min: -24
            max: 24
            step: 1
            value: 0
            orientation: 'vertical'
            pos: (640, 165)
            size_hint: (0.2, 0.6)
            on_value:
                app.stream.exposure_comp = self.value
                print(self.value)

        Label:
            id: exposureLabel:
            text: "Exposure\nComp"
            font_size: 24
            pos: (640, 540)
            size_hint: (0.2, 0.2)
            halign: 'center'
            valign: 'middle'

